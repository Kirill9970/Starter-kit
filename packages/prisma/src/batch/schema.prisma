generator client {
  provider = "prisma-client-js"
  output   = "./generated/client"
}

datasource db {
  provider = "postgresql"
  url      = env("BATCH_DATABASE_URL")
}

model Settings {
  id          String            @id(map: "PK_67f9851255786d09846e6323030") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  key         Settings_key_enum
  data        Json
  description String?           @db.VarChar
  createdAt   DateTime          @map("created_at") @default(now()) @db.Timestamptz(6)
  updatedAt   DateTime          @map("updated_at") @default(now()) @db.Timestamptz(6)
}

model BatchOperation {
  id             String                             @id(map: "PK_5d40daf37b06aa449f696bf5616") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  operationType  BatchOperation_operation_type_enum @map("operation_type")
  sql            String                             @db.VarChar
  status         BatchOperation_status_enum
  error          String?                            @db.VarChar
  createdAt      DateTime                           @map("created_at") @default(now()) @db.Timestamptz(6)
  updatedAt      DateTime                           @map("updated_at") @default(now()) @db.Timestamptz(6)
}

enum Settings_key_enum {
  BATCH_PROCESS_OPERATION_INTERVAL
  BATCH_PROCESS_OPERATION_LIMIT
  BATCH_INSERT_OPERATION_INTERVAL
}

enum BatchOperation_operation_type_enum {
  MAKE_TRADEABLE
  MARKETPLACE_LISTING
  MARKETPLACE_UPDATE
  MARKETPLACE_CANCEL
  MARKETPLACE_DEAL
}

enum BatchOperation_status_enum {
  UNPROCESSED
  PROCESSING
  SUCCESS
  FAIL
}
